<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>Glowy GO ! 2026 æ­£å¼ç‰ˆ</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        :root { --amber: #FFBF00; --blue: #4285F4; --bg: #fdfaf5; }
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; font-family: -apple-system, sans-serif; background: #eee; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; z-index: 1; }

        /* é ‚éƒ¨ä»‹é¢ï¼šæœå°‹ + æœƒå“¡é ­è²¼ */
        .top-ui { position: absolute; top: 20px; left: 15px; right: 15px; z-index: 1000; display: flex; flex-direction: column; gap: 12px; }
        .search-row { display: flex; gap: 10px; align-items: center; }
        .search-bar { flex: 1; background: white; height: 52px; border-radius: 26px; display: flex; align-items: center; padding: 0 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.15); font-size: 16px; color: #333; }
        .search-bar input { border: none; outline: none; width: 100%; font-size: 15px; }
        .user-avatar { width: 52px; height: 52px; border-radius: 26px; background: white; box-shadow: 0 4px 15px rgba(0,0,0,0.15); border: 2px solid white; cursor: pointer; overflow: hidden; }

        /* Tags ç¬¬äºŒæ’ */
        .tags-row { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 5px; -webkit-overflow-scrolling: touch; }
        .tags-row::-webkit-scrollbar { display: none; }
        .tag { background: white; padding: 9px 18px; border-radius: 20px; white-space: nowrap; font-size: 13px; font-weight: 500; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border: 1px solid #f0f0f0; }

        /* åº•éƒ¨å°è¦½ï¼šåœ°åœ–ã€è²¢ç»ã€å¯«çœŸé›†ã€å¡åŒ… */
        .bottom-nav { position: fixed; bottom: 0; left: 0; right: 0; height: 85px; background: rgba(255,255,255,0.98); z-index: 2000; display: flex; border-top: 1px solid #eee; padding-bottom: env(safe-area-inset-bottom); }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #999; font-size: 11px; cursor: pointer; }
        .nav-item.active { color: var(--amber); }
        .nav-icon { font-size: 24px; margin-bottom: 4px; }

        /* æœƒå“¡ä¸­å¿ƒé¢æ¿ (å¾é ­è²¼é€²å…¥) */
        #member-panel { position: fixed; top: 0; right: -100%; width: 85%; height: 100%; background: white; z-index: 3000; transition: 0.4s cubic-bezier(0, 0, 0.2, 1); padding: 50px 25px; box-shadow: -10px 0 30px rgba(0,0,0,0.1); }
        #member-panel.open { right: 0; }
        .member-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }

        /* GPS å®šä½éˆ• */
        .gps-btn { position: absolute; bottom: 105px; right: 20px; z-index: 1000; background: white; width: 56px; height: 56px; border-radius: 28px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 20px rgba(0,0,0,0.25); font-size: 26px; border: none; cursor: pointer; }
        .gps-btn:active { transform: scale(0.9); background: #fafafa; }
    </style>
</head>
<body>

    <div id="map"></div>

    <div class="top-ui">
        <div class="search-row">
            <div class="search-bar">ğŸ” <input type="text" placeholder="æœå°‹ 5 åˆ†é˜æ‡‰æ€¥è¨­æ–½..."></div>
            <div class="user-avatar" onclick="toggleMember()">
                <img src="https://api.dicebear.com/7.x/micah/svg?seed=Glowy" style="width:100%">
            </div>
        </div>
        <div class="tags-row">
            <div class="tag">ğŸ¼ å“ºä¹³å®¤</div><div class="tag">ğŸ¡ æŠ“å¯¶é»</div><div class="tag">â˜• è¦ªå­å‹å–„</div><div class="tag">ğŸ’ æ‰˜è‚²</div><div class="tag">ğŸ’§ é£²æ°´æ©Ÿ</div>
        </div>
    </div>

    <div id="member-panel">
        <div class="member-header">
            <h2 style="margin:0;">æœƒå“¡ä¸­å¿ƒ</h2>
            <div onclick="toggleMember()" style="font-size:28px; cursor:pointer;">âœ•</div>
        </div>
        <div style="background: #fff9e6; padding: 15px; border-radius: 12px; margin-bottom: 25px;">
            <p style="margin:0; color:#888; font-size:13px;">ç•¶å‰ç´¯ç©é»æ•¸</p>
            <h1 style="margin:5px 0; color:var(--amber);">ğŸ’ 25 pts</h1>
        </div>
        <div style="line-height: 3.5; font-weight: 500; color: #444;">
            <div style="border-bottom:1px solid #f5f5f5;">ğŸ‘¶ å¯¶å¯¶è³‡æ–™ (0-10æ­²)</div>
            <div style="border-bottom:1px solid #f5f5f5;">ğŸ“œ æ­·å²æ´»å‹•ç´€éŒ„</div>
            <div style="border-bottom:1px solid #f5f5f5;">ğŸ’³ æ¡è³¼ç´€éŒ„ (Collect)</div>
            <div style="border-bottom:1px solid #f5f5f5;">â¤ï¸ å€‹äººåå¥½è¨­å®š</div>
            <div style="border-bottom:1px solid #f5f5f5;">âš™ï¸ ç³»çµ±è¨­å®š</div>
        </div>
    </div>

    <button class="gps-btn" onclick="triggerGPS()">ğŸ¯</button>

    <div class="bottom-nav">
        <div class="nav-item active"><span class="nav-icon">ğŸ—ºï¸</span>åœ°åœ–</div>
        <div class="nav-item"><span class="nav-icon">âœï¸</span>è²¢ç»</div>
        <div class="nav-item" onclick="alert('é€²å…¥å¯«çœŸé›†æ¨¡çµ„ï¼šå…è²»åŒ¯å‡º 2 é  A4')"><span class="nav-icon">ğŸ“¸</span>å¯«çœŸé›†</div>
        <div class="nav-item"><span class="nav-icon">ğŸ—‚ï¸</span>å¡åŒ…</div>
    </div>

    <script>
        // åˆå§‹åŒ–ï¼šæ ¹æ“šå¦³æ‰€åœ¨ä½ç½®å…¨çƒåŒ– (é è¨­å·´é»å±•ç¾è·¨åœ‹æ€§)
        const map = L.map('map', { zoomControl: false, attributionControl: false }).setView([48.8566, 2.3522], 15);
        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png').addTo(map);

        let userMarker, radiusCircle;
        let facilitiesLayer = L.layerGroup().addTo(map);

        // ğŸŸ¢ çœŸæ­£çš„å‹•æ…‹é»ä½åŠ è¼‰ï¼ˆæ¨¡æ“¬ Open Data ä»‹æ¥é‚è¼¯ï¼‰
        function loadFacilities(lat, lng) {
            facilitiesLayer.clearLayers();
            // åœ¨å‘¨é‚Š 1km å…§ç”¢ç”Ÿ 15 å€‹ç¥ç€é»
            for(let i=0; i<15; i++) {
                const rLat = lat + (Math.random()-0.5)*0.015;
                const rLng = lng + (Math.random()-0.5)*0.015;
                L.circleMarker([rLat, rLng], { 
                    radius: 8, fillColor: "#FFBF00", color: "white", weight: 2, fillOpacity: 0.9 
                }).addTo(facilitiesLayer).bindPopup("ç¥ç€å‹å–„è¨­æ–½é»");
            }
        }

        // ğŸ”µ GPS ç”Ÿå‘½ç·š
        function triggerGPS() {
            map.locate({setView: true, maxZoom: 16, enableHighAccuracy: true});
        }

        map.on('locationfound', function(e) {
            if (userMarker) map.removeLayer(userMarker);
            userMarker = L.circleMarker(e.latlng, { radius: 9, fillColor: "#4285F4", color: "white", weight: 3, fillOpacity: 1 }).addTo(map);
            
            // ç•«å‡º 5 åˆ†é˜æ‡‰æ€¥åœˆ (ç´„ 400m)
            if (radiusCircle) map.removeLayer(radiusCircle);
            radiusCircle = L.circle(e.latlng, { radius: 400, color: "#FFBF00", weight: 1, fillOpacity: 0.05 }).addTo(map);
            
            loadFacilities(e.latlng.lat, e.latlng.lng);
        });

        map.on('locationerror', () => {
            loadFacilities(map.getCenter().lat, map.getCenter().lng);
        });

        function toggleMember() { document.getElementById('member-panel').classList.toggle('open'); }

        // åˆå§‹è¼‰å…¥
        loadFacilities(48.8566, 2.3522);
        window.onload = () => setTimeout(triggerGPS, 1000);
    </script>
</body>
</html>

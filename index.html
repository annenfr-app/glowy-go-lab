<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Glowy GO ! | å¸¶å¯¶å¯¶ä¹Ÿèƒ½å‡ºé–€å»ç©</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Noto Sans TC', sans-serif; }
        #map { height: 100vh; width: 100vw; z-index: 1; }
        
        .bg-amber-primary { background-color: #FFBF00; }
        .text-amber-primary { color: #FFBF00; }
        
        /* éš±è— Leaflet é è¨­å…ƒä»¶ */
        .leaflet-control-zoom { display: none !important; }
        .leaflet-bottom.leaflet-right { display: none; }

        /* æµ®å‹•æ³¡æ³¡æ¨£å¼ */
        .bubble-popup .leaflet-popup-content-wrapper {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 8px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .bubble-popup .leaflet-popup-tip { display: none; }

        /* ç¥ç€æ´»å‹•é» (Amber) */
        .amber-dot {
            width: 18px; height: 18px;
            background: #FFBF00;
            border: 3px solid white;
            border-radius: 50%;
            box-shadow: 0 0 12px rgba(255,191,0,0.8);
        }
        /* é€æ˜å°é»ƒé» (Facilities) */
        .facility-dot {
            width: 10px; height: 10px;
            background: rgba(255, 223, 0, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.8);
            border-radius: 50%;
        }

        /* éš±è—æ²è»¸ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-gray-50 overflow-hidden">

    <div class="fixed top-4 left-0 right-0 z-[1000] px-4 flex items-center gap-3">
        <div class="flex-grow bg-white h-12 rounded-full shadow-lg flex items-center px-4 gap-3 cursor-pointer border border-gray-100 active:scale-[0.98] transition-all" onclick="openSearch()">
            <svg class="w-5 h-5 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
            <span class="text-gray-400 text-sm font-medium">è¦å»å“ªè£¡ç©ï¼Ÿ(å€åŸŸã€æ—¥æœŸ...)</span>
        </div>
        
        <div id="member-avatar" class="w-12 h-12 bg-amber-50 rounded-full shadow-lg border-2 border-white flex items-center justify-center overflow-hidden cursor-pointer active:ring-4 ring-amber-200 transition-all" onclick="toggleMenu('member')">
            <img id="avatar-img" src="https://api.dicebear.com/7.x/adventurer/svg?seed=Buddy" alt="User Avatar" class="w-full h-full object-cover">
        </div>
    </div>

    <div class="fixed top-20 left-0 right-0 z-[1000] flex gap-2 px-4 overflow-x-auto no-scrollbar">
        <button class="flex-shrink-0 px-4 py-2 bg-white/90 backdrop-blur rounded-full shadow-sm text-xs font-bold border border-gray-200 active:bg-amber-50 text-gray-700">ğŸ¼ å“ºä¹³å®¤</button>
        <button class="flex-shrink-0 px-4 py-2 bg-white/90 backdrop-blur rounded-full shadow-sm text-xs font-bold border border-gray-200 active:bg-amber-50 text-gray-700">ğŸš¾ å…¬å»</button>
        <button class="flex-shrink-0 px-4 py-2 bg-white/90 backdrop-blur rounded-full shadow-sm text-xs font-bold border border-gray-200 active:bg-amber-50 text-gray-700">ğŸ’§ é£²æ°´æ©Ÿ</button>
        <button class="flex-shrink-0 px-4 py-2 bg-white/90 backdrop-blur rounded-full shadow-sm text-xs font-bold border border-gray-200 active:bg-amber-50 text-gray-700">ğŸ›— é›»æ¢¯</button>
    </div>

    <div id="map"></div>

    <button class="fixed right-6 bottom-32 z-[1000] w-12 h-12 bg-white rounded-full shadow-xl flex items-center justify-center text-gray-600 active:text-amber-500 transition-colors" onclick="locateUser()">
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/></svg>
    </button>

    <div class="fixed bottom-0 left-0 right-0 z-[2000] bg-white rounded-t-[32px] shadow-[0_-10px_30px_rgba(0,0,0,0.08)] px-8 pt-4 pb-10">
        <div class="w-12 h-1.5 bg-gray-200 rounded-full mx-auto mb-6"></div>
        <div class="flex justify-between items-center text-center">
            <div class="flex flex-col items-center gap-1 group cursor-pointer">
                <div class="p-2 bg-amber-100 rounded-2xl text-amber-600 mb-1">ğŸ§­</div>
                <span class="text-xs font-bold text-gray-800">æ¢ç´¢</span>
            </div>
            <div class="flex flex-col items-center gap-1 opacity-40 grayscale group cursor-pointer">
                <div class="p-2 mb-1 text-xl">ğŸ›’</div>
                <span class="text-xs font-bold">å‘¨é‚Šæ”¯æ´</span>
            </div>
            <div class="flex flex-col items-center gap-1 opacity-40 grayscale group cursor-pointer">
                <div class="p-2 mb-1 text-xl">ğŸ”§</div>
                <span class="text-xs font-bold">è²¢ç»</span>
            </div>
            <div class="flex flex-col items-center gap-1 opacity-40 grayscale group cursor-pointer">
                <div class="p-2 mb-1 text-xl">ğŸ§§</div>
                <span class="text-xs font-bold">å…¶ä»–</span>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // åˆå§‹åŒ–åœ°åœ– (å°åŒ—)
        const map = L.map('map', {
            zoomControl: false,
            attributionControl: false
        }).setView([25.0339, 121.5644], 16);

        // ä½¿ç”¨ä¹¾æ·¨åº•åœ–
        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
            maxZoom: 19
        }).addTo(map);

        // æ¨¡æ“¬ï¼šè²¼åœ–éš¨æ©ŸåŒ– (å¦‚æœæœƒå“¡æ²’ç…§ç‰‡)
        const stickers = ['Lucky', 'Scooter', 'Snuggles', 'Daisy', 'Mochi'];
        const randomSeed = stickers[Math.floor(Math.random() * stickers.length)];
        document.getElementById('avatar-img').src = `https://api.dicebear.com/7.x/adventurer/svg?seed=${randomSeed}`;

        // æ•¸æ“šï¼šæ´»å‹•
        const activities = [
            { id: 1, lat: 25.036, lng: 121.566, name: "ä¿¡ç¾©è¦ªå­é¤¨é–±è¦½æœƒ", age: "0-3æ­²" },
            { id: 2, lat: 25.032, lng: 121.562, name: "è‰åœ°æ³¡æ³¡è—è¡“ç¯€", age: "2-6æ­²" }
        ];

        // æ•¸æ“šï¼šè¨­æ–½
        const facilities = [
            { lat: 25.0345, lng: 121.564 }, { lat: 25.0330, lng: 121.565 },
            { lat: 25.0355, lng: 121.561 }, { lat: 25.0315, lng: 121.567 }
        ];

        // æ¸²æŸ“é»ƒé»è¨­æ–½
        facilities.forEach(f => {
            L.marker([f.lat, f.lng], {
                icon: L.divIcon({ className: 'facility-dot', iconSize: [10, 10] })
            }).addTo(map);
        });

        // æ¸²æŸ“æ´»å‹•èˆ‡æ³¡æ³¡
        activities.forEach(a => {
            const marker = L.marker([a.lat, a.lng], {
                icon: L.divIcon({ className: 'amber-dot', iconSize: [18, 18] })
            }).addTo(map);

            const popupContent = `
                <div class="w-48 p-2">
                    <div class="text-[10px] text-amber-500 font-bold tracking-wider mb-1 uppercase">Recommended</div>
                    <h3 class="font-bold text-gray-900 text-lg mb-0.5">${a.name}</h3>
                    <p class="text-xs text-gray-500 mb-4">ğŸ‘¶ é©åˆ ${a.age} | ğŸŒ¤ 24Â°C</p>
                    <div class="flex gap-2">
                        <button class="flex-1 bg-gray-100 text-gray-600 py-2.5 rounded-xl text-xs font-bold" onclick="alert('å°èˆªé–‹å•Ÿ')">å‰å¾€</button>
                        <button class="flex-1 bg-amber-primary text-white py-2.5 rounded-xl text-xs font-black shadow-md shadow-amber-200" onclick="alert('é–‹å•Ÿæ¡é›†ä»‹é¢...')">æ¡é›†å¯¶ç‰©</button>
                    </div>
                </div>
            `;

            marker.bindPopup(popupContent, {
                className: 'bubble-popup',
                closeButton: false,
                offset: [0, -10]
            });
        });

        function locateUser() {
            map.locate({setView: true, maxZoom: 17});
        }

        function openSearch() {
            alert("é€²å…¥ SNCF æœå°‹é ï¼šå€åŸŸã€æ—¥æœŸã€éš¨è¡Œå¯¶å¯¶é¸æ“‡");
        }

        function toggleMenu(type) {
            alert("é–‹å•Ÿæœƒå“¡é¸å–®ï¼šç”Ÿå‘½å²æ„Ÿã€ç¥ç€é»æ•¸ã€éš¨è¡Œæ¸…å–®");
        }
    </script>
</body>
</html>
